<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPD | GLOBAL ARCHIVIST</title>
    <style>
        :root { --gpd-cyan: #00f2ff; --gpd-green: #00ff44; --gpd-dark: #030507; --gpd-border: #004c54; }
        body { background: var(--gpd-dark); color: var(--gpd-cyan); font-family: 'Courier New', monospace; margin: 0; padding: 15px; text-transform: uppercase; }
        
        .header { text-align: center; border-bottom: 2px solid var(--gpd-cyan); padding-bottom: 10px; margin-bottom: 20px; }
        .sync-status { color: var(--gpd-green); font-size: 0.6rem; letter-spacing: 2px; }

        .container { border: 1px solid var(--gpd-border); padding: 15px; background: #050a10; margin-bottom: 15px; }
        h3 { font-size: 0.9rem; margin-top: 0; color: var(--gpd-cyan); letter-spacing: 3px; border-bottom: 1px solid #111; padding-bottom: 10px; }
        
        .input-row { display: flex; gap: 10px; margin-bottom: 10px; }
        .input-group { flex: 1; }
        label { font-size: 0.6rem; color: #004c54; display: block; margin-bottom: 5px; }
        
        input { background: #0e161d; border: 1px solid #1a2a35; color: #fff; width: 100%; padding: 12px; box-sizing: border-box; font-family: monospace; outline: none; }
        
        .btn-manifest { background: #007a8b; border: none; color: #fff; width: 100%; padding: 15px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .btn-log { background: #008f11; border: none; color: #fff; width: 100%; padding: 15px; font-weight: bold; cursor: pointer; }

        .archive-box { background: #000; padding: 10px; font-size: 0.8rem; color: #888; min-height: 50px; border-top: 1px solid #111; max-height: 250px; overflow-y: auto; }
        .log-entry { border-bottom: 1px solid #111; padding: 10px 0; }
        .log-time { color: #333; font-size: 0.6rem; display: block; }
    </style>
</head>
<body>

    <div class="header">
        <div style="letter-spacing: 5px; font-size: 1.2rem;">GPD GLOBAL ARCHIVIST</div>
        <div class="sync-status">‚óè GLOBAL SYNC ACTIVE</div>
    </div>

    <div class="container">
        <h3>[ COMMAND TERMINAL ]</h3>
        <div class="input-row">
            <div class="input-group">
                <label>OFFICER</label>
                <input type="text" id="off_name" placeholder="Badge ID">
            </div>
            <div class="input-group">
                <label>SUSPECT</label>
                <input type="text" id="sus_name" placeholder="Subject Name">
            </div>
        </div>
        <label>SEARCH DATABASE</label>
        <input type="text" placeholder="Type to search...">
        <button class="btn-manifest">ADD TO MANIFEST</button>
    </div>

    <div class="container">
        <h3>[ SEIZURE MANIFEST ]</h3>
        <div style="display: flex; justify-content: space-between; font-size: 0.6rem; color: #444; margin-bottom: 20px;">
            <span>ITEM</span><span>QTY</span><span>VALUE</span>
        </div>
        <div style="display: flex; gap: 20px; align-items: center;">
            <div style="font-size: 2rem; color: var(--gpd-green);">0 U</div>
            <button class="btn-log" onclick="logCase()">LOG CASE</button>
        </div>
    </div>

    <div class="container">
        <h3>[ GLOBAL ARCHIVES ]</h3>
        <div id="archive-list" class="archive-box">Syncing records...</div>
    </div>

    <script>
        // Your Verified API link
        const API_URL = "https://sheetdb.io/api/v1/sn9w3fnrrq26j";

        async function logCase() {
            const o = document.getElementById('off_name').value.trim();
            const s = document.getElementById('sus_name').value.trim();
            if(!o || !s) return alert("REQUIRED: OFFICER ID & SUBJECT NAME");

            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        data: [{ "officer": o, "suspect": s, "timestamp": new Date().toLocaleString() }]
                    })
                });
                if(response.ok) {
                    alert("REPORT SECURED GLOBALLY");
                    location.reload();
                }
            } catch (e) { alert("CONNECTION FAILED"); }
        }

        async function loadArchive() {
            try {
                const res = await fetch(API_URL);
                const data = await res.json();
                if(data.length > 0) {
                    // Filter and reverse data for the list
                    document.getElementById('archive-list').innerHTML = data.reverse()
                    .filter(c => c.officer && c.suspect)
                    .map(c => `
                        <div class="log-entry">
                            <span class="log-time">${c.timestamp || "RECENT"}</span>
                            OFFICER <b>${c.officer}</b> BUSTED <b>${c.suspect}</b>
                        </div>
                    `).join('');
                } else {
                    document.getElementById('archive-list').innerHTML = "No Global Records Found.";
                }
            } catch (e) { document.getElementById('archive-list').innerHTML = "OFFLINE"; }
        }
        window.onload = loadArchive;
    </script>
</body>
</html>
